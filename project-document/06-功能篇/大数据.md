#### 引言

>+ 本文内容主要说明大数据项目中经常需要构建的能力；
>
>

#### 01-监控告警系统

>+ 监控
>
>

##### 介绍

>+ 组成部分
>	+ 数据采集：结余Metrics的异常告警时间，通过Tracing定位问题可疑模块，根据模块详细的日志定位到错误根源，最后再返回来调整Metrics的告警规则；【数据来源：机器、容器、应用、中间件】
>		+ Metrics：（采集工具） 自定义埋点，JMX， Telegraf等
>			+ 度量单位
>				+ Gauge：宽度、厚度、尺度、标准、铁道贵局、枪管口径、汽车胎压计
>				+ Counter：计数器
>				+ Histogram：直方图、柱状图
>				+ Timer：定时器、计时器
>				+ Meter: 计量器，米
>		+ Tracing：（采集工具） Skywalking, Pinpoint等
>			+ 分布式链路追踪，一个请求从接受到处理完毕整个生命周期的跟踪路径
>		+ Logging：（采集工具） logstash,FileBeat, Flume等
>			+ 项目应用运行的详细信息，比如方法入参，异常堆栈信息；
>	+ 数据存储
>		+ 时序数据库(开源的)
>			+ OpenTSDB： 底层存储依赖HBase
>			+ KariosDB
>			+ Promethes
>			+ InfluxDB
>		+ ElaticSearch
>		+ Druid
>	+ 告警
>		+ 告警规则
>			+ 规则多
>		+ 通知对象
>			+ 对象多
>		+ 通知方式
>			+ 方式多
>	+ 数据可视化
>		+ Grafana
>		+ 前端图表组件
>
>+ 监控告警系统架构：（写多读少）
>	+ 数据采集 -> Kafka -> 数据存储 -> 告警 | 数据可视化
>+ 挑战：
>	+ 问题：
>		+ 因监控数据量巨大导致把存储数据库写挂，从而导致告警不可用，监控图标无数据；
>	+ 解决方向
>		+ 解决数据存储问题，替换存储层，多种存储层分担压力
>		+ 下游服务尽可能少依赖数据存储层（告警提前）
>	+ 选择技术
>		+ Flink
>			+ 支持Event Time语义
>			+ 灵活的Window机制和Watermark处理延迟数据
>			+ 状态存储和容错
>			+ Flink CEP
>			+ 延迟低、吞吐量高
>	+ 引入Flink地方
>		+ 数据格式转换作业：采集后的数据做清洗、转换
>		+ 日志数据存储作业：日志数据存储到ElasticSearch
>		+ 其它监控数据存储作业: Metrics、Tracing数据存储到另外时序数据库分担压力；
>		+ 告警作业：根据告警规则计算判断告警